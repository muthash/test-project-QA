generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "sqlite"
    url      = env("DATABASE_URL")
}

model AppUser {
    id                         Int      @id @default(autoincrement())
    is_deleted                 Boolean  @default(false)
    username                   String   @unique
    firstname                  String
    lastname                   String
    password                   String
    email                      String
    nonlocked                  Boolean
    enabled                    Boolean
    last_time_password_updated DateTime @default("1970-01-01T00:00:00.000Z")
    password_never_expires     Boolean  @default(false)
    cannot_change_password     Boolean  @default(false)

    roles  AppUserRole[]
    phones UserPhone[]

    @@map("appuser")
}

model Role {
    id          Int     @id @default(autoincrement())
    name        String  @unique
    description String
    is_disabled Boolean @default(false)

    appUsers AppUserRole[]

    @@map("role")
}

model AppUserRole {
    appuser_id Int
    role_id    Int
    appUser    AppUser @relation(fields: [appuser_id], references: [id])
    role       Role    @relation(fields: [role_id], references: [id])

    @@id([appuser_id, role_id])
    @@map("appuser_role")
}

model UserPhone {
    id               Int     @id @default(autoincrement())
    appuser_id       Int
    phone_country_id Int
    phone            String //@db.VarChar(20)
    order_index      Int
    appUser          AppUser @relation(fields: [appuser_id], references: [id])

    @@map("user_phone")
}
